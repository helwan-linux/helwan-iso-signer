# -----------------------------------------------------------
# ðŸ§© Helwan ISO Signer â€” PKGBUILD (Educational Version)
# Written for training and professional packaging on Arch / Helwan Linux
# -----------------------------------------------------------

# Ø§Ø³Ù… Ø§Ù„Ø­Ø²Ù…Ø© Ø²ÙŠ Ù…Ø§ Ù‡ÙŠ Ù‡ØªØ¸Ù‡Ø± ÙÙŠ pacman
pkgname=helwan-iso-signer

# Ø±Ù‚Ù… Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø±Ø³Ù…ÙŠ
pkgver=1.0

# Ø±Ù‚Ù… Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¯Ø§Ø®Ù„ Ù†ÙØ³ Ø§Ù„Ø¥ØµØ¯Ø§Ø± (Ø¨ÙŠØ²ÙŠØ¯ Ù„Ùˆ Ø¹Ø¯Ù„Øª Ø§Ù„Ø­Ø²Ù…Ø© Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± Ø§Ù„Ù†Ø³Ø®Ø©)
pkgrel=1

# ÙˆØµÙ Ù…Ø®ØªØµØ± Ù„Ù„Ø­Ø²Ù…Ø©
pkgdesc="A professional GUI tool for signing ISO files and generating release data (SHA/GPG)"

# Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ© Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø© â€” 'any' ØªØ¹Ù†ÙŠ Ø£Ù† Ø§Ù„Ø­Ø²Ù…Ø© Ù…Ø³ØªÙ‚Ù„Ø© Ø¹Ù† Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ© (Ø²ÙŠ Ø³ÙƒØ±Ø¨Øª Python)
arch=('any')

# Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø£Ùˆ ØµÙØ­Ø© GitHub
url="https://github.com/helwan-linux/helwan-iso-signer"

# Ù†ÙˆØ¹ Ø§Ù„ØªØ±Ø®ÙŠØµ
license=('MIT')

# Ø§Ù„Ø­Ø²Ù… Ø§Ù„Ù„ÙŠ Ù„Ø§Ø²Ù… ØªÙƒÙˆÙ† Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¹Ø´Ø§Ù† Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ ÙŠØ´ØªØºÙ„
depends=('python' 'python-pyqt5' 'gnupg')

# Ù…ØµØ¯Ø± Ø§Ù„ÙƒÙˆØ¯ (Ù…Ù„Ù tar.gz Ù…Ù† GitHub Release Ø£Ùˆ Tag)
# $pkgver Ø¨ÙŠØªÙ… Ø¯Ù…Ø¬Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙÙŠ Ø§Ù„Ø±Ø§Ø¨Ø·
source=("$url/archive/refs/tags/v$pkgver.tar.gz")

# Ø¨ØµÙ…Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ù„Ù â€” Ù…Ù…ÙƒÙ† Ù…Ø¤Ù‚ØªÙ‹Ø§ Ù†Ø®Ù„ÙŠÙ‡Ø§ SKIP Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ·ÙˆÙŠØ±
sha256sums=('SKIP')

# -----------------------------------------------------------
# ðŸ—ï¸ Ù‚Ø³Ù… Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø­Ø²Ù…Ø©
# -----------------------------------------------------------

# Ø¯Ø§Ù„Ø© package() Ù‡ÙŠ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ø£Ù†Ù‡Ø§ Ø¨ØªØ­Ø¯Ø¯ Ù…Ø§ Ø§Ù„Ø°ÙŠ Ø³ÙŠÙˆØ¶Ø¹ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø­Ø²Ù…Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
package() {

    # Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ù…Ø¬Ù„Ø¯ Ø§Ù„ÙƒÙˆØ¯ Ø¯Ø§Ø®Ù„ Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¨Ù†Ø§Ø¡
    # $srcdir Ù‡Ùˆ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ù…Ø¤Ù‚Øª Ø§Ù„Ù„ÙŠ makepkg ÙŠÙÙƒ ÙÙŠÙ‡ Ø§Ù„Ù…Ù„ÙØ§Øª
    cd "$srcdir/$pkgname-$pkgver"

    # -------------------------------------------------------
    # ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…Ù„ÙØ§Øª Ø¥Ù„Ù‰ Ù…Ø¬Ù„Ø¯ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø­Ø²Ù…Ø©
    # -------------------------------------------------------

    # ðŸŸ© Ø§Ù„Ù…Ù„Ù Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
    # Ù†Ø³ØªØ®Ø¯Ù… -D Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ùˆ -m755 Ù„Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠØ©
    install -Dm755 signer_gui.py "$pkgdir/usr/bin/helwan-signer"

    # ðŸŸ© Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ (ØªÙØ³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…)
    install -Dm644 signer_icon.png \
        "$pkgdir/usr/share/icons/hicolor/256x256/apps/helwan-iso-signer.png"

    # ðŸŸ© Ù…Ù„Ù .desktop Ù„Ø¸Ù‡ÙˆØ± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬
    install -Dm644 helwan-iso-signer.desktop \
        "$pkgdir/usr/share/applications/helwan-iso-signer.desktop"

    # ðŸŸ© ÙˆØ«Ø§Ø¦Ù‚ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ (ØªØ¸Ù‡Ø± ÙÙŠ /usr/share/doc)
    install -Dm644 README.md \
        "$pkgdir/usr/share/doc/$pkgname/README.md"
}

# -----------------------------------------------------------
# ðŸ’¡ Ù†ØµØ§Ø¦Ø­ Ù„Ù„Ù…Ø·ÙˆØ±:
# -----------------------------------------------------------
# 1. Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ØŒ Ø´ØºÙ„:
#       makepkg -si
#    Ù„Ø¨Ù†Ø§Ø¡ ÙˆØªØ«Ø¨ÙŠØª Ø§Ù„Ø­Ø²Ù…Ø© Ù…Ø¨Ø§Ø´Ø±Ø©.
#
# 2. Ù„ØªØ­Ø¯ÙŠØ« Ø¨ØµÙ…Ø§Øª Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ø¹Ø¯ ÙƒÙ„ Ø¥ØµØ¯Ø§Ø± Ø¬Ø¯ÙŠØ¯:
#       updpkgsums
#
# 3. Ù„Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ù…Ø¹Ù„ÙˆÙ…Ø§Øª AUR (.SRCINFO):
#       makepkg --printsrcinfo > .SRCINFO
#
# 4. Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¬ÙˆØ¯Ø© Ø§Ù„Ø­Ø²Ù…Ø©:
#       namcap PKGBUILD
# -----------------------------------------------------------
